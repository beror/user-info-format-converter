<!DOCTYPE html>
<html>
<head>
  <title>Converter</title>
</head>

<body>
  <label for='fileInput'>Upload the file:</label>
  <input id='fileInput' type='file'>

  <div>
    <span>File reading progress:</span>
    <span id='loadedCounter'>-</span>
    <span>/</span>
    <span id='total'>-</span>
  </div>

  <script type='text/javascript'>
    const fileInput = document.getElementById('fileInput');
    const loadedCounterElem = document.getElementById('loadedCounter');
    const totalElem = document.getElementById('total');

    const fileReader = new FileReader();
    const fileList = fileInput.files;

    fileInput.onchange = () => fileReader.readAsText(fileList[0]);

    fileReader.onprogress = event => {
      loadedCounter.innerText = event.loaded;
      totalElem.innerText = event.total;
    };

    fileReader.onload = event => {
      loadedCounter.innerText = event.loaded;
      totalElem.innerText = event.total;

      const stringsInFile = fileReader.result.split(/\s/);
      const token = stringsInFile.find(string => string.startsWith('EAAB'));

      const demoDiv = document.createElement('div');
      demoDiv.innerText = 'Found a token: ' + token;
      document.getElementsByTagName('div')[0].append(demoDiv);
    };
  </script>
</body>
</html> 